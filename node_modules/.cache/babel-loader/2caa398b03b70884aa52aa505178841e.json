{"ast":null,"code":"var _jsxFileName = \"/Users/dmitriy/Desktop/test_project/src/components/ChangeCart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport useSWR, { mutate } from \"swr\";\nimport { firestore } from \"../index\";\nimport MarkdownEditor from \"rich-markdown-editor\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst getFile = async (userId, fileId) => {\n  const doc = await db.collection(\"users\").doc(userId).collection(\"files\").doc(fileId).get();\n  return doc.data();\n};\n\nconst changeCart = ({\n  userId,\n  fileId\n}) => {\n  _s();\n\n  const {\n    data: file,\n    error\n  } = useSWR([userId, fileId], getFile);\n  const [value, setValue] = useState(null);\n  useEffect(() => {\n    if (file !== undefined && value === null) {\n      console.log(\"Set initial content\");\n      setValue(file.content);\n    }\n  }, [file, value]);\n\n  const saveChanges = () => {\n    firestore.collection(\"Products\").doc(userId).collection(\"files\").doc(fileId).update({\n      content: value\n    });\n    mutate([userId, fileId]);\n  };\n\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"We had an issue while getting the data\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 21\n  }, this);else if (!file) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 26\n  }, this);else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"editor-header\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          className: \"back-button\",\n          to: `/user/${userId}`,\n          children: \"&lt;\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: file.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: file.content === value,\n          onClick: saveChanges,\n          className: \"save-button\",\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editor\",\n        children: /*#__PURE__*/_jsxDEV(MarkdownEditor, {\n          defaultValue: file.content,\n          onChange: getValue => {\n            setValue(getValue());\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(changeCart, \"sFScHY6/7/ZazJ1Ss12Lxgq+N9A=\", false, function () {\n  return [useSWR];\n});\n\nexport default ChangeCart;","map":{"version":3,"sources":["/Users/dmitriy/Desktop/test_project/src/components/ChangeCart.js"],"names":["React","useState","useEffect","useSWR","mutate","firestore","MarkdownEditor","getFile","userId","fileId","doc","db","collection","get","data","changeCart","file","error","value","setValue","undefined","console","log","content","saveChanges","update","name","getValue","ChangeCart"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,MAAP,IAAiBC,MAAjB,QAA+B,KAA/B;AACA,SAASC,SAAT,QAA0B,UAA1B;AACA,OAAOC,cAAP,MAA2B,sBAA3B;;;AAEA,MAAMC,OAAO,GAAG,OAAOC,MAAP,EAAeC,MAAf,KAA0B;AACxC,QAAMC,GAAG,GAAG,MAAMC,EAAE,CACjBC,UADe,CACJ,OADI,EAEfF,GAFe,CAEXF,MAFW,EAGfI,UAHe,CAGJ,OAHI,EAIfF,GAJe,CAIXD,MAJW,EAKfI,GALe,EAAlB;AAOA,SAAOH,GAAG,CAACI,IAAJ,EAAP;AACD,CATD;;AAWA,MAAMC,UAAU,GAAG,CAAC;AAAEP,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAD,KAAwB;AAAA;;AACzC,QAAM;AAAEK,IAAAA,IAAI,EAAEE,IAAR;AAAcC,IAAAA;AAAd,MAAwBd,MAAM,CAAC,CAACK,MAAD,EAASC,MAAT,CAAD,EAAmBF,OAAnB,CAApC;AACA,QAAM,CAACW,KAAD,EAAQC,QAAR,IAAoBlB,QAAQ,CAAC,IAAD,CAAlC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIc,IAAI,KAAKI,SAAT,IAAsBF,KAAK,KAAK,IAApC,EAA0C;AACxCG,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAH,MAAAA,QAAQ,CAACH,IAAI,CAACO,OAAN,CAAR;AACD;AACF,GALQ,EAKN,CAACP,IAAD,EAAOE,KAAP,CALM,CAAT;;AAOA,QAAMM,WAAW,GAAG,MAAM;AACxBnB,IAAAA,SAAS,CAACO,UAAV,CAAqB,UAArB,EAAiCF,GAAjC,CAAqCF,MAArC,EAA6CI,UAA7C,CAAwD,OAAxD,EAAiEF,GAAjE,CAAqED,MAArE,EAA6EgB,MAA7E,CAAoF;AAClFF,MAAAA,OAAO,EAAEL;AADyE,KAApF;AAGAd,IAAAA,MAAM,CAAC,CAACI,MAAD,EAASC,MAAT,CAAD,CAAN;AACD,GALD;;AAOA,MAAIQ,KAAJ,EAAW,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP,CAAX,KACK,IAAI,CAACD,IAAL,EAAW,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP,CAAX,KACA;AACH,wBACE;AAAA,8BACE;AAAQ,QAAA,SAAS,EAAC,eAAlB;AAAA,gCACE,QAAC,IAAD;AAAM,UAAA,SAAS,EAAC,aAAhB;AAA8B,UAAA,EAAE,EAAG,SAAQR,MAAO,EAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE;AAAA,oBAAKQ,IAAI,CAACU;AAAV;AAAA;AAAA;AAAA;AAAA,gBAJF,eAKE;AACE,UAAA,QAAQ,EAAEV,IAAI,CAACO,OAAL,KAAiBL,KAD7B;AAEE,UAAA,OAAO,EAAEM,WAFX;AAGE,UAAA,SAAS,EAAC,aAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAcE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,+BACE,QAAC,cAAD;AACE,UAAA,YAAY,EAAER,IAAI,CAACO,OADrB;AAEE,UAAA,QAAQ,EAAGI,QAAD,IAAc;AACtBR,YAAAA,QAAQ,CAACQ,QAAQ,EAAT,CAAR;AACD;AAJH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAdF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAyBD;AAEF,CAhDD;;GAAMZ,U;UAC0BZ,M;;;AAgDhC,eAAeyB,UAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport useSWR, { mutate } from \"swr\";\nimport { firestore } from \"../index\";\nimport MarkdownEditor from \"rich-markdown-editor\";\n\nconst getFile = async (userId, fileId) => {\n  const doc = await db\n    .collection(\"users\")\n    .doc(userId)\n    .collection(\"files\")\n    .doc(fileId)\n    .get();\n\n  return doc.data();\n};\n\nconst changeCart = ({ userId, fileId }) => {\n  const { data: file, error } = useSWR([userId, fileId], getFile);\n  const [value, setValue] = useState(null);\n\n  useEffect(() => {\n    if (file !== undefined && value === null) {\n      console.log(\"Set initial content\");\n      setValue(file.content);\n    }\n  }, [file, value]);\n\n  const saveChanges = () => {\n    firestore.collection(\"Products\").doc(userId).collection(\"files\").doc(fileId).update({\n      content: value,\n    });\n    mutate([userId, fileId]);\n  };\n\n  if (error) return <p>We had an issue while getting the data</p>;\n  else if (!file) return <p>Loading...</p>;\n  else {\n    return (\n      <div>\n        <header className=\"editor-header\">\n          <Link className=\"back-button\" to={`/user/${userId}`}>\n            &amp;lt;\n          </Link>\n          <h3>{file.name}</h3>\n          <button\n            disabled={file.content === value}\n            onClick={saveChanges}\n            className=\"save-button\"\n          >\n            Save Changes\n          </button>\n        </header>\n        <div className=\"editor\">\n          <MarkdownEditor\n            defaultValue={file.content}\n            onChange={(getValue) => {\n              setValue(getValue());\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n\n}\nexport default ChangeCart;"]},"metadata":{},"sourceType":"module"}